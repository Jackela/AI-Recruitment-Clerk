#!/usr/bin/env sh
set -e

# Skip local CI for delete-only pushes.
delete_only=1
while read -r local_ref local_sha remote_ref remote_sha; do
  if [ "$local_sha" != "0000000000000000000000000000000000000000" ]; then
    delete_only=0
    break
  fi
done

if [ "$delete_only" -eq 1 ]; then
  echo "Skipping ci:local for delete-only push"
  exit 0
fi

npm run ci:local
