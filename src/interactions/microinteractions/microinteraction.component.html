<div 
  #element
  class="microinteraction-container"
  [class.disabled]="disabled"
  [class.loading]="loading"
  [class.error]="error"
  [class.success]="success"
  [@lift]="liftState"
  [@glow]="glowState"
  [@shake]="shakeState"
  [@slideIn]="config.type === 'slide-in'"
  [@fadeIn]="config.type === 'fade-in'"
  [@scaleIn]="config.type === 'scale-in'"
  [@stagger]="config.type === 'stagger'">

  <!-- Ripple Effect Container -->
  <div class="ripple-container" *ngIf="config.type === 'button-ripple'">
    <div 
      class="ripple"
      *ngFor="let ripple of ripples"
      [style.left.px]="ripple.x"
      [style.top.px]="ripple.y"
      [@ripple]="'active'">
    </div>
  </div>

  <!-- Loading Spinner -->
  <div class="loading-container" *ngIf="config.type === 'loading-spinner' && loading">
    <div class="spinner" [@spin]>
      <svg class="circular" viewBox="25 25 50 50">
        <circle 
          class="path" 
          cx="50" 
          cy="50" 
          r="20" 
          fill="none" 
          stroke="currentColor" 
          stroke-width="2" 
          stroke-miterlimit="10"/>
      </svg>
    </div>
    <span class="loading-text" *ngIf="config.type === 'loading-spinner'">Processing...</span>
  </div>

  <!-- Success Checkmark -->
  <div class="success-container" *ngIf="config.type === 'success-checkmark' && success">
    <svg class="checkmark" viewBox="0 0 24 24" [@checkmark]>
      <path 
        class="checkmark-path"
        fill="none" 
        stroke="currentColor" 
        stroke-width="2" 
        stroke-linecap="round" 
        stroke-linejoin="round"
        d="M20 6L9 17l-5-5"/>
    </svg>
    <span class="success-text">Success!</span>
  </div>

  <!-- Error Indicator -->
  <div class="error-container" *ngIf="error">
    <svg class="error-icon" viewBox="0 0 24 24">
      <circle cx="12" cy="12" r="10" fill="none" stroke="currentColor" stroke-width="2"/>
      <line x1="15" y1="9" x2="9" y2="15" stroke="currentColor" stroke-width="2"/>
      <line x1="9" y1="9" x2="15" y2="15" stroke="currentColor" stroke-width="2"/>
    </svg>
    <span class="error-text">Error occurred</span>
  </div>

  <!-- Skeleton Loading -->
  <div class="skeleton-container" *ngIf="config.type === 'skeleton-loading'">
    <div class="skeleton-line skeleton-line--full" [@pulse]></div>
    <div class="skeleton-line skeleton-line--half" [@pulse]></div>
    <div class="skeleton-line skeleton-line--quarter" [@pulse]></div>
  </div>

  <!-- Progress Bar -->
  <div class="progress-container" *ngIf="config.type === 'progress-bar'">
    <div class="progress-track">
      <div class="progress-fill" [style.width.%]="loading ? 65 : 100"></div>
    </div>
    <span class="progress-text">{{ loading ? 'Processing...' : 'Complete' }}</span>
  </div>

  <!-- Notification Toast -->
  <div class="toast-container" *ngIf="config.type === 'notification-toast'" [@slideIn]>
    <div class="toast-icon">
      <svg *ngIf="success" viewBox="0 0 24 24" class="icon-success">
        <path fill="currentColor" d="M20 6L9 17l-5-5"/>
      </svg>
      <svg *ngIf="error" viewBox="0 0 24 24" class="icon-error">
        <circle cx="12" cy="12" r="10"/>
        <line x1="15" y1="9" x2="9" y2="15"/>
        <line x1="9" y1="9" x2="15" y2="15"/>
      </svg>
      <svg *ngIf="loading" viewBox="0 0 24 24" class="icon-info">
        <circle cx="12" cy="12" r="10"/>
        <line x1="12" y1="16" x2="12" y2="12"/>
        <line x1="12" y1="8" x2="12.01" y2="8"/>
      </svg>
    </div>
    <div class="toast-content">
      <div class="toast-title">
        {{ success ? 'Success' : error ? 'Error' : 'Processing' }}
      </div>
      <div class="toast-message">
        <ng-content></ng-content>
      </div>
    </div>
    <button class="toast-close" (click)="interactionComplete.emit()" aria-label="Close notification">
      <svg viewBox="0 0 24 24">
        <line x1="18" y1="6" x2="6" y2="18"/>
        <line x1="6" y1="6" x2="18" y2="18"/>
      </svg>
    </button>
  </div>

  <!-- Default Content Slot -->
  <div class="content-slot" *ngIf="!['loading-spinner', 'skeleton-loading', 'progress-bar', 'notification-toast'].includes(config.type)">
    <ng-content></ng-content>
  </div>

  <!-- Accessibility Announcements -->
  <div class="sr-only" aria-live="polite" aria-atomic="true">
    <span *ngIf="loading">Content is loading</span>
    <span *ngIf="success">Action completed successfully</span>
    <span *ngIf="error">An error occurred</span>
  </div>
</div>