{
  "id": "CODE-002",
  "title": "Phase 3: Comprehensive Codebase Cleanup & Refactoring",
  "description": "Fix all remaining code quality issues, split large files, and fix test failures across the entire codebase.",
  "acceptanceCriteria": [
    "All 'any' types removed from TypeScript files",
    "All files under 500 lines (or split into smaller modules)",
    "TypeScript compilation passes without errors",
    "All lint warnings resolved",
    "All tests passing"
  ],
  "priority": 1,
  "branchName": "refactor/code-cleanup",
  "subtasks": [
    {
      "id": "CODE-002a",
      "title": "Fix Failing Tests in LLM Services",
      "description": "Fix test failures in resume-parser-svc and jd-extractor-svc related to undefined mock objects in test setup.",
      "acceptanceCriteria": [
        "vision-llm.service.spec.ts - All tests pass",
        "llm.service.spec.ts - All tests pass",
        "LlmService resolves properly in test module"
      ],
      "estimatedHours": 2,
      "dependsOn": [],
      "passes": false,
      "files": [
        "apps/resume-parser-svc/src/vision-llm/vision-llm.service.spec.ts",
        "apps/jd-extractor-svc/src/llm/llm.service.spec.ts"
      ]
    },
    {
      "id": "CODE-002b",
      "title": "Remove Remaining 'any' Types from Core Services",
      "description": "Remove all remaining 'any' types from app-gateway services and DTOs that weren't covered in previous iterations.",
      "acceptanceCriteria": [
        "No 'any' types in apps/app-gateway/src/domains/",
        "No 'any' types in core gateway controllers"
      ],
      "estimatedHours": 2,
      "dependsOn": [],
      "passes": false,
      "files": [
        "apps/app-gateway/src/domains/analytics/analytics.dto.ts",
        "apps/app-gateway/src/domains/user-management/user-management.service.ts",
        "apps/app-gateway/src/domains/usage-limit/usage-limit.controller.ts",
        "apps/app-gateway/src/domains/resume/resume.controller.ts",
        "apps/app-gateway/src/domains/questionnaire/questionnaire.controller.ts",
        "libs/shared-dtos/src/domains/analytics.contracts.ts",
        "libs/shared-dtos/src/domains/analytics.service.ts",
        "libs/service-base/src/base-microservice.service.ts",
        "libs/infrastructure-shared/src/index.ts"
      ]
    },
    {
      "id": "CODE-002c",
      "title": "Split Large Angular Component Files",
      "description": "Split oversized Angular component files (>500 lines) into smaller, focused components following component splitting patterns.",
      "acceptanceCriteria": [
        "mobile-dashboard.component.ts < 500 lines (split display/filter/logic)",
        "mobile-navigation.component.ts < 500 lines",
        "mobile-upload.component.ts < 500 lines",
        "mobile-performance.component.ts < 500 lines",
        "mobile-results-display.component.ts < 500 lines",
        "analytics-dashboard.component.ts < 500 lines",
        "bento-grid.component.ts < 500 lines",
        "data-table.component.ts < 500 lines",
        "error-boundary.component.ts < 500 lines",
        "error-reporting.component.ts < 500 lines",
        "progress-tracker.component.ts < 500 lines",
        "timesheet-table.component.ts < 500 lines",
        "virtual-scroll.component.ts < 500 lines",
        "mobile-swipe.component.spec.ts < 500 lines"
      ],
      "estimatedHours": 12,
      "dependsOn": [],
      "passes": false,
      "files": [
        "apps/ai-recruitment-frontend/src/app/components/mobile/mobile-dashboard.component.ts",
        "apps/ai-recruitment-frontend/src/app/components/mobile/mobile-navigation.component.ts",
        "apps/ai-recruitment-frontend/src/app/components/mobile/mobile-upload.component.ts",
        "apps/ai-recruitment-frontend/src/app/components/mobile/mobile-performance.component.ts",
        "apps/ai-recruitment-frontend/src/app/components/mobile/mobile-results-display.component.ts",
        "apps/ai-recruitment-frontend/src/app/components/mobile/mobile-results-display.component.ts",
        "apps/ai-recruitment-frontend/src/app/components/shared/analytics-dashboard/analytics-dashboard.component.ts",
        "apps/ai-recruitment-frontend/src/app/components/shared/bento-grid/bento-grid.component.ts",
        "apps/ai-recruitment-frontend/src/app/components/shared/bento-grid/bento-grid.component.spec.ts",
        "apps/ai-recruitment-frontend/src/app/components/shared/data-table/data-table.component.ts",
        "apps/ai-recruitment-frontend/src/app/components/shared/error-boundary/error-boundary.component.ts",
        "apps/ai-recruitment-frontend/src/app/components/shared/error-reporting/error-reporting.component.ts",
        "apps/ai-recruitment-frontend/src/app/components/shared/progress-tracker/progress-tracker.component.ts",
        "apps/ai-recruitment-frontend/src/app/components/shared/timesheet-table/timesheet-table.component.ts",
        "apps/ai-recruitment-frontend/src/app/components/shared/virtual-scroll/virtual-scroll.component.ts",
        "apps/ai-recruitment-frontend/src/app/components/mobile/mobile-swipe.component.spec.ts"
      ]
    },
    {
      "id": "CODE-002d",
      "title": "Split Large DTO Files",
      "description": "Split oversized DTO files (>500 lines) into smaller, focused interface files.",
      "acceptanceCriteria": [
        "analytics.dto.ts split into domain files (<500 lines each)",
        "questionnaire.dto.ts split into <500 lines",
        "incentive.service.ts split into <500 lines",
        "analytics.service.ts split into <500 lines",
        "usage-limit.dto.ts split into <500 lines",
        "analytics.test.ts split into <500 lines"
      ],
      "estimatedHours": 6,
      "dependsOn": [],
      "passes": false,
      "files": [
        "libs/shared-dtos/src/domains/analytics.dto.ts",
        "libs/shared-dtos/src/domains/questionnaire.dto.ts",
        "libs/shared-dtos/src/domains/incentive.service.ts",
        "libs/shared-dtos/src/domains/analytics.service.ts",
        "libs/shared-dtos/src/domains/usage-limit.dto.ts",
        "libs/shared-dtos/src/domains/analytics.test.ts"
      ]
    },
    {
      "id": "CODE-002e",
      "title": "Fix Lint Warnings in Report Generator",
      "description": "Fix inconsistent type import warnings in report-generator-svc services.",
      "acceptanceCriteria": [
        "report-generator.service.ts - No lint warnings",
        "report-templates.service.ts - No lint warnings"
      ],
      "estimatedHours": 1,
      "dependsOn": [],
      "passes": false,
      "files": [
        "apps/report-generator-svc/src/report-generator/report-generator.service.ts",
        "apps/report-generator-svc/src/report-generator/report-templates.service.ts"
      ]
    },
    {
      "id": "CODE-002f",
      "title": "Fix Lint Warnings in JD Extractor",
      "description": "Fix inconsistent type import warning in llm.service.ts.",
      "acceptanceCriteria": ["llm.service.ts - No lint warnings"],
      "estimatedHours": 0.5,
      "dependsOn": [],
      "passes": false,
      "files": ["apps/jd-extractor-svc/src/extraction/llm.service.ts"]
    }
  ]
}
