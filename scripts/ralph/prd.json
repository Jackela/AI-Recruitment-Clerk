{
  "project": "AI-Recruitment-Clerk",
  "branchName": "ralph/repo-hygiene-ci",
  "description": "Fix CI failures - granular tasks for better iteration and reliability.",
  "userStories": [
    {
      "id": "US-004a",
      "title": "Add tests for calculateTotalExperience in experience-calculator.ts",
      "description": "As a developer, I need tests for total experience calculation function.",
      "acceptanceCriteria": [
        "Create tests for calculateTotalExperience with single position",
        "Create tests for calculateTotalExperience with multiple positions",
        "Create tests for calculateTotalExperience with no positions",
        "Create tests for month/year conversions",
        "npm run test passes"
      ],
      "priority": 4,
      "passes": true,
      "notes": "Created experience-calculator.spec.ts with 28 tests covering all scenarios"
    },
    {
      "id": "US-004b",
      "title": "Add tests for calculateOverlap in experience-calculator.ts",
      "description": "As a developer, I need tests for overlap detection function.",
      "acceptanceCriteria": [
        "Create tests for overlapping positions (same dates)",
        "Create tests for non-overlapping positions",
        "Create tests for partial overlap scenarios",
        "Create tests for edge cases (null dates)",
        "npm run test passes"
      ],
      "priority": 5,
      "passes": true,
      "notes": "Added 22 overlap detection tests covering same dates, non-overlapping, partial overlaps, null dates, and different date formats"
    },
    {
      "id": "US-004c",
      "title": "Add tests for detectGaps in experience-calculator.ts",
      "description": "As a developer, I need tests for employment gap detection.",
      "acceptanceCriteria": [
        "Create tests for gaps between positions",
        "Create tests for continuous employment (no gaps)",
        "Create tests for multiple gaps",
        "Create tests for gap duration calculation",
        "npm run test passes"
      ],
      "priority": 6,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-004d",
      "title": "Add tests for seniority level calculation in experience-calculator.ts",
      "description": "As a developer, I need tests for seniority determination logic.",
      "acceptanceCriteria": [
        "Create tests for Entry level detection",
        "Create tests for Mid level detection",
        "Create tests for Senior level detection",
        "Create tests for Expert level detection",
        "npm run test passes"
      ],
      "priority": 7,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-005a",
      "title": "Add tests for touch event handlers in mobile-swipe.component.ts",
      "description": "As a developer, I need tests for touch event handling.",
      "acceptanceCriteria": [
        "Create tests for onTouchStart handler",
        "Create tests for onTouchMove handler",
        "Create tests for onTouchEnd handler",
        "Create tests for onMouseDown handler (desktop)",
        "npm run test passes"
      ],
      "priority": 8,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-005b",
      "title": "Add tests for swipe detection in mobile-swipe.component.ts",
      "description": "As a developer, I need tests for swipe gesture detection logic.",
      "acceptanceCriteria": [
        "Create tests for horizontal swipe detection (left/right)",
        "Create tests for swipe threshold calculation",
        "Create tests for isSwipe判定",
        "Create tests for velocity calculation",
        "npm run test passes"
      ],
      "priority": 9,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-005c",
      "title": "Add tests for action triggers in mobile-swipe.component.ts",
      "description": "As a developer, I need tests for swipe action triggering.",
      "acceptanceCriteria": [
        "Create tests for triggerAction on left swipe",
        "Create tests for triggerAction on right swipe",
        "Create tests for action emission via EventEmitter",
        "Create tests for threshold-based triggering",
        "npm run test passes"
      ],
      "priority": 10,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-006a",
      "title": "Add tests for resume parsing flow in resume-parser-integration.service.ts",
      "description": "As a developer, I need tests for resume parsing integration.",
      "acceptanceCriteria": [
        "Create tests for handleResumeParsed method",
        "Create tests for error handling when parsing fails",
        "Create tests for valid resume scenarios",
        "npm run test passes"
      ],
      "priority": 11,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-006b",
      "title": "Add tests for JD parsing flow in resume-parser-integration.service.ts",
      "description": "As a developer, I need tests for job description parsing integration.",
      "acceptanceCriteria": [
        "Create tests for handleJDParsed method",
        "Create tests for JD parsing error scenarios",
        "Create tests for valid JD scenarios",
        "npm run test passes"
      ],
      "priority": 12,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-007a",
      "title": "Add tests for report generation flow in report-generator.service.ts",
      "description": "As a developer, I need tests for report generation.",
      "acceptanceCriteria": [
        "Create tests for generateReport method with valid data",
        "Create tests for error handling when data is missing",
        "Create tests for report format validation",
        "npm run test passes"
      ],
      "priority": 13,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-007b",
      "title": "Add tests for PDF generation in report-generator.service.ts",
      "description": "As a developer, I need tests for PDF generation scenarios.",
      "acceptanceCriteria": [
        "Create tests for generatePDF method",
        "Create tests for PDF layout validation",
        "Create tests for PDF generation with charts",
        "npm run test passes"
      ],
      "priority": 14,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-008a",
      "title": "Add tests for navigation-guide.service.ts",
      "description": "As a developer, I need tests for navigation guide service.",
      "acceptanceCriteria": [
        "Create tests for guide step generation",
        "Create tests for progress tracking",
        "Create tests for guide completion detection",
        "Coverage reaches at least 60%",
        "npm run test passes"
      ],
      "priority": 15,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-008b",
      "title": "Add tests for redis-token-blacklist.service.ts",
      "description": "As a developer, I need tests for token blacklist service.",
      "acceptanceCriteria": [
        "Create tests for token blacklisting",
        "Create tests for token checking",
        "Create tests for token expiration",
        "Coverage reaches at least 60%",
        "npm run test passes"
      ],
      "priority": 16,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-008c",
      "title": "Add tests for i18n.service.ts",
      "description": "As a developer, I need tests for internationalization service.",
      "acceptanceCriteria": [
        "Create tests for translate method",
        "Create tests for language switching",
        "Create tests for missing translation handling",
        "Coverage reaches at least 60%",
        "npm run test passes"
      ],
      "priority": 17,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-009",
      "title": "Fix E2E test configuration and infrastructure",
      "description": "As a developer, I need E2E tests to run reliably in CI.",
      "acceptanceCriteria": [
        "Check Playwright configuration in apps/ai-recruitment-frontend-e2e/",
        "Fix dev server timeout issues",
        "Ensure test files are in correct location",
        "npm run test:e2e passes locally",
        "Document E2E setup requirements"
      ],
      "priority": 18,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-010",
      "title": "Fix dependency security scan issues",
      "description": "As a developer, I need dependency scan to pass without critical vulnerabilities.",
      "acceptanceCriteria": [
        "Run npm audit to identify vulnerabilities",
        "Update packages with critical/high vulnerabilities",
        "Document any accepted risks in scripts/ralph/PR-DESCRIPTION.md",
        "npm run audit passes or only has moderate/low warnings"
      ],
      "priority": 19,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-011",
      "title": "Set realistic quality gate threshold",
      "description": "As a team, we need an achievable coverage target that improves over time toward the 85% goal.",
      "acceptanceCriteria": [
        "Analyze current coverage (61.83%) and gap to 85%",
        "Set intermediate threshold of 70% for this sprint",
        "Update config/quality-gates.json with threshold: 0.70",
        "Add roadmap comment: 'TODO: Increase to 85% after coverage improvements'",
        "npm run test:coverage and quality gates pass with 70% threshold"
      ],
      "priority": 20,
      "passes": false,
      "notes": "Long-term goal: 85% coverage. This story sets 70% as an achievable milestone."
    },
    {
      "id": "US-012",
      "title": "Final verification - all CI checks passing",
      "description": "As a developer, I need all GitHub Actions checks to pass before merging.",
      "acceptanceCriteria": [
        "Run npm run ci:full - all checks pass",
        "Verify GitHub Actions checks pass on PR",
        "Document any remaining warnings in scripts/ralph/PR-DESCRIPTION.md",
        "Create summary of all coverage improvements"
      ],
      "priority": 21,
      "passes": false,
      "notes": ""
    }
  ]
}
