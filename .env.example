# AI Recruitment Clerk Environment Configuration
#
# ===========================================
# ENVIRONMENT SETUP
# ===========================================
#
# This is the single source of truth for all environment variables.
# Copy this file to .env.local for local development.
#
# NODE_ENV Usage:
# - development: Local development with debug features enabled
# - production: Production deployment with optimized settings
# - test: Test environment with minimal dependencies
#
# To switch environments, set NODE_ENV environment variable:
#   NODE_ENV=development npm run dev
#   NODE_ENV=production npm run start
#   NODE_ENV=test npm run test
#
# The application will load .env.local first, then apply environment-specific overrides
# based on NODE_ENV value. No need for separate .env.development, .env.production files.

# ===========================================
# AUTHENTICATION & SECURITY
# ===========================================

# JWT Configuration
JWT_SECRET=YOUR_JWT_SECRET_KEY_HERE_MINIMUM_32_CHARACTERS_REQUIRED
JWT_REFRESH_SECRET=YOUR_JWT_REFRESH_SECRET_KEY_HERE_MINIMUM_32_CHARACTERS_REQUIRED
JWT_EXPIRES_IN=1h
JWT_REFRESH_EXPIRES_IN=7d
JWT_EXPIRES_IN_SECONDS=3600

# Data Encryption (AES-256-GCM)
# CRITICAL: Generate a secure 64-character hex key for production
# Use: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
ENCRYPTION_MASTER_KEY=YOUR_64_CHARACTER_HEX_ENCRYPTION_KEY_HERE_REQUIRED_FOR_AES256

# Additional JWT Settings
JWT_AUDIENCE=ai-recruitment-clerk
JWT_ISSUER=ai-recruitment-clerk-auth

# ===========================================
# DATABASE CONFIGURATION
# ===========================================

# MongoDB Configuration
MONGODB_URL=mongodb://username:password@localhost:27017/ai-recruitment?authSource=admin
MONGO_URL=mongodb://username:password@localhost:27017/ai-recruitment?authSource=admin
MONGODB_URI=mongodb://username:password@localhost:27017/ai-recruitment?authSource=admin
MONGODB_ROOT_PASSWORD=YOUR_MONGODB_PASSWORD_HERE
MONGODB_DATABASE=ai-recruitment
DATABASE_NAME=ai-recruitment

# ===========================================
# MESSAGE QUEUE
# ===========================================

# NATS Configuration
NATS_URL=nats://localhost:4222
NATS_CLUSTER_ID=ai-recruitment-cluster
NATS_CLIENT_ID=ai-recruitment-client
NATS_OPTIONAL=true

# ===========================================
# EXTERNAL API SERVICES
# ===========================================

# Google Gemini API (Required for resume parsing and JD extraction)
GEMINI_API_KEY=YOUR_GEMINI_API_KEY_HERE

# OpenAI Embedding API (Semantic Cache)
OPENAI_API_KEY=YOUR_OPENAI_API_KEY_HERE
OPENAI_EMBEDDING_MODEL=text-embedding-3-small
OPENAI_EMBEDDING_API_URL=https://api.openai.com/v1/embeddings
OPENAI_EMBEDDING_TIMEOUT_MS=10000
OPENAI_EMBEDDING_MAX_RETRIES=3
OPENAI_EMBEDDING_RETRY_DELAY_MS=250

# ===========================================
# APPLICATION CONFIGURATION
# ===========================================

# Environment
NODE_ENV=development

# Server Configuration
PORT=3000
API_PREFIX=api
FRONTEND_URL=http://localhost:4200
API_BASE_URL=http://localhost:3000/api

# CORS Configuration
CORS_ORIGIN=http://localhost:4200,http://localhost:4202
CORS_CREDENTIALS=true

# Compression
ENABLE_COMPRESSION=true

# Node Options
NODE_OPTIONS=--max-old-space-size=2048

# File Upload Configuration
MAX_FILE_SIZE=10485760
MAX_FILES_PER_UPLOAD=10
UPLOAD_DIR=./uploads
ALLOWED_FILE_TYPES=.pdf,.doc,.docx

# ===========================================
# LOGGING & MONITORING
# ===========================================

# Logging Configuration
LOG_LEVEL=info
LOG_FORMAT=json
ENABLE_REQUEST_LOGGING=true

# Monitoring
ENABLE_METRICS=true
METRICS_PORT=9090
ENABLE_PERFORMANCE_MONITORING=true

# Health Check
HEALTH_CHECK_TIMEOUT=10000
HEALTH_CHECK_INTERVAL=30000

# ===========================================
# RATE LIMITING & SECURITY
# ===========================================

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Security Headers
ENABLE_HELMET=true
# IMPORTANT: Enable CSRF in production for security
# Set to false only for development API testing
ENABLE_CSRF=true

# ===========================================
# FEATURE FLAGS
# ===========================================

# Feature Toggles
ENABLE_EMAIL_NOTIFICATIONS=false
ENABLE_AUDIT_LOGGING=true
ENABLE_PERFORMANCE_MONITORING=true

# ===========================================
# DEVELOPMENT SETTINGS
# ===========================================

# Development Mode Settings (do not use in production)
# Swagger/API documentation - should be DISABLED in production
ENABLE_SWAGGER=true
ENABLE_DEBUG_ROUTES=false
MOCK_EXTERNAL_SERVICES=false

# ===========================================
# CACHE CONFIGURATION
# ===========================================

# Redis Cache (optional - falls back to memory cache if disabled)
# REDIS_URL=redis://localhost:6379
# REDIS_PASSWORD=your_redis_password_here
USE_REDIS_CACHE=false
DISABLE_REDIS=true
CACHE_TTL=300
CACHE_MAX_ITEMS=1000
REDIS_CONNECTION_TIMEOUT=10000
REDIS_COMMAND_TIMEOUT=5000
REDIS_FALLBACK_TO_MEMORY=true
CACHE_HEALTHCHECK_ENABLED=true
SEMANTIC_CACHE_ENABLED=true
SEMANTIC_CACHE_SIMILARITY_THRESHOLD=0.92
SEMANTIC_CACHE_TTL_MS=86400000
SEMANTIC_CACHE_MAX_RESULTS=5
SEMANTIC_CACHE_INDEX_NAME=idx:semantic_cache
SEMANTIC_CACHE_KEY_PREFIX=semantic:cache:
SEMANTIC_CACHE_VECTOR_FIELD=embedding
SEMANTIC_CACHE_VECTOR_DIMS=1536
SEMANTIC_CACHE_DISTANCE_METRIC=COSINE

# ===========================================
# PRODUCTION OVERRIDES
# ===========================================

# Production-specific settings
# REDIS_URL=redis://localhost:6379
# ELASTICSEARCH_URL=http://localhost:9200
# SENTRY_DSN=your_sentry_dsn_here
# DATADOG_API_KEY=your_datadog_api_key_here

# ===========================================
# BUSINESS CONFIGURATION
# ===========================================

# Business Rules
FREE_USAGE_LIMIT=5
FEEDBACK_CODE_EXPIRY_DAYS=30
MIN_REWARD_AMOUNT=1
MAX_REWARD_AMOUNT=8

# External Services
QUESTIONNAIRE_URL=https://wj.qq.com/s2/your_questionnaire_id/

# Alipay (Optional - for marketing features)
ALIPAY_APP_ID=
ALIPAY_PRIVATE_KEY=
